# üöÄ KAIROS FLOW

> **The "Henry Ford" Framework for Production AI.**  
> Reduce tokens by **88%** and eliminate hallucinations via granular architecture.

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![TypeScript](https://img.shields.io/badge/%3C%2F%3E-TypeScript-blue.svg)](https://www.typescriptlang.org/)
[![DeepSeek Ready](https://img.shields.io/badge/DeepSeek-Ready-purple.svg)](https://deepseek.com)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](CONTRIBUTING.md)

---

## üìâ Why KairosFlow? (Evidence-First)

We don't sell "magic". We sell **Engineering**.

| Metric | Impact | Proven In |
| :--- | :--- | :--- |
| **88% Cost Reduction** | Replaced 3.5k token "God Prompts" with 5x 400 token atomic prompts. | **Kairos WP** (Production) |
| **Zero Hallucinations** | System metadata is injected by Backend, never generated by LLM. | **Kairos Creative** (Production) |
| **$0.05 / Day** | Full 15-agent pipeline running on DeepSeek V3. | **Internal Benchmarks** |

---

## üÜö The Paradigm Shift

Most frameworks let LLMs "figure it out". **KairosFlow is an assembly line.**

```mermaid
graph TD
    subgraph "‚ùå The Old Way (Monolithic Agent)"
        U1[User Request] -->|3000+ Token Prompt| G[ü§ñ GOD AGENT]
        G -->|Thinking...| H[ü§Ø Hallucination Risk]
        G -->|Expensive| D[üí∏ High Cost]
        G -->|Unpredictable| O1[Blob Output]
    end

    subgraph "‚úÖ The Kairos Way (Henry Ford Assembly Line)"
        U2[User Request] -->|Orchestrator| P1[üë∑ Agent: Spec]
        P1 -->|Valid JSON| P2[üë∑ Agent: Architect]
        P2 -->|Valid JSON| P3[üë∑ Agent: Coder]
        P3 -->|Valid JSON| P4[üïµÔ∏è Agent: QA]
        P4 -->|Certified| O2[üíé Production Artifact]
    end
    
    style G fill:#ffcccc,stroke:#333,stroke-width:2px
    style O2 fill:#ccffcc,stroke:#333,stroke-width:2px
```

---

## üõ†Ô∏è The Engineering (No Magic)

We don't trust the LLM to "be good". We enforce it with **Zod** and **TypeScript**.
Every artifact passing between agents must satisfy the **GranularArtifactStandard**.

### The "Zero-Hallucination" Schema
The backend injects the `metadata` and `validation` fields. The Agent is **physically unable** to hallucinate them because it never touches them.

```typescript
// src/schemas/artifact.ts
export const GranularArtifactSchema = z.object({
  agent_id: z.string(),
  agent_name: z.string(), 
  responsibility: z.string(),
  input: z.record(z.any()),
  output: z.union([z.record(z.any()), z.string(), z.array(z.any())]),
  // üõ°Ô∏è INJECTED BY SYSTEM (LLM CANNOT TOUCH)
  metadata: z.object({
    timestamp: z.string().datetime(),
    status: z.enum(['success', 'error', 'pending'])
  }),
  // üõ°Ô∏è VALIDATED BY ZOD
  validation: z.object({
    is_valid: z.boolean(),
    checks_passed: z.array(z.string())
  })
});
```

---

## üè≠ Born in Production

KairosFlow isn't a weekend experiment. It was extracted from live, commercial systems enabling high-margin AI workflows.

> **"Validated in commercial environments: Kairos Creative V2 (Marketing) & Kairos WP (Software Dev)"**

---

## ‚ö° Quick Start

### 1. Initialize
```bash
npx kairos-flow init my-factory
cd my-factory
```

### 2. Configure (DeepSeek Example)
`kairos.config.json`:
```json
{
  "llm": {
    "provider": "deepseek",
    "model": "deepseek-chat",
    "apiKey": "${DEEPSEEK_API_KEY}"
  },
  "plugins": ["./plugins/my-logger"]
}
```

### 3. Run
```bash
npx kairos-flow run
```
*Watch the assembly line go to work.*

---

## üíé The "Secret Sauce"

### 1. Zero-Hallucination Metadata ‚Ñ¢
**Stop asking LLMs to do system work.**
In KairosFlow, the Agent (LLM) is **forbidden** from generating metadata. It only generates the `output` payload. The CLI (Backend) wraps it in a `GranularArtifact` with cryptographically secure IDs, timestamps, and execution stats.

### 2. The DeepSeek Factory ($0.05/day)
We've optimized the architecture to work perfectly with **DeepSeek V3/R1**.
- **Native JSON Mode:** Enforced at the provider level.
- **Granular Prompts:** Small, focused prompts (<1k tokens) mean you can run complex 15-agent pipelines for pennies.

### 3. Plugin Ecosystem üîå
Don't touch the core. Extend it.
- **Hooks:** `onPipelineStart`, `onAgentFinish`, `onInit`.
- **Use Cases:** Log to Datadog, push to Slack, commit to Git.

---

## ü§ù Join the Revolution

We are building the standard for **Deterministic AI Engineering**.

- **[‚≠ê Star the Repo](https://github.com/JavierBaal/KairosFlow)** (It helps!)
- **[üìñ Read the Docs](docs/)**
- **[üêõ Report Issues](https://github.com/JavierBaal/KairosFlow/issues)**

> *Built with ‚ù§Ô∏è by [Javier Baal](https://x.com/javierbaal00). Powered by the Henry Ford Principle.*
